<!-- #include tool-h3 gui\blocks\tool-h3.htm;image=#image;colspan=1;1; -->

<!-- #ignoreif not spy.GetParam('snum.refinement.cctbx.nsff.tsc.Calculate')

<tr ALIGN='left' NAME='SNUM_REFINEMENT_NSFF' width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-first-column.htm;help_ext=NoSpherA2 Extras;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->

<td width="13%" align='left'>
    <b>Basis Set</b>
</td>
<td width="21%">
  $+
    html.Snippet("gui/snippets/input-combo",
    "name=NoSpherA2_basis@refine",
    "items=spy.NoSpherA2.getBasisListStr()",
    "value=spy.GetParam('snum.refinement.cctbx.nsff.tsc.basis_name')",
    "onchange=spy.SetParam('snum.refinement.cctbx.nsff.tsc.basis_name', html.GetValue('~name~'))")
   $-
  </td>

<td width="11%" align='right'>
  <b>Method</b>
</td>
<td width="21%">
  $+
    html.Snippet("gui/snippets/input-combo",
    "name=NoSpherA2_method@refine",
    "items='Hartree-Fock<-rhf;B3LYP<-rks'",
    "value=spy.GetParam('snum.refinement.cctbx.nsff.tsc.method')",
    "onchange=spy.SetParam('snum.refinement.cctbx.nsff.tsc.method', html.GetValue('~name~'))")
   $-
</td>

<td width="8%" align='right'>
  <b>CPUs</b>
</td>
<td width="9%" align='center'>
$+
    html.Snippet("gui/snippets/input-combo",
    "name=NoSpherA2_cpus@refine",
    "items=spy.NoSpherA2.getCPUListStr()",
    "value=spy.GetParam('snum.refinement.cctbx.nsff.ncpus')",
    "onchange=spy.SetParam('snum.refinement.cctbx.nsff.ncpus', html.GetValue('~name~'))>>html.Update()")
   $-
</td>

 <td width="8%" align='right'>
  <b>Mem(Gb) </b>
</td>
<td width="3%" align='center'>
$+
    html.Snippet("gui/snippets/input-text",
    "name=NoSpherA2_mem",
    "value=spy.GetParam('snum.refinement.cctbx.nsff.mem')",
    "onchange=spy.SetParam('snum.refinement.cctbx.nsff.mem', html.GetValue('~name~'))")
   $-
</td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->

<tr ALIGN='left' NAME='SNUM_REFINEMENT_NSFF' width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-first-column.htm;help_ext=Non-Spherical Form Factors;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->
<td width="13%" align='left'>
  <b>Charge </b>
</td>
<td width='6%' align='left'>
  $+
    html.Snippet("gui/snippets/input-text",
    "name=NoSpherA2_Charge",
    "value=spy.GetParam('snum.refinement.cctbx.nsff.tsc.charge')",
    "onchange=spy.SetParam('snum.refinement.cctbx.nsff.tsc.charge', html.GetValue('~name~'))",
    )
  $-
</td>
<td width="16%" align='right'>
  <b>Multiplicity </b>
</td>
<td width='6%'>
  $+
    html.Snippet("gui/snippets/input-text",
    "name=NoSpherA2_Multiplicity",
    "value=spy.GetParam('snum.refinement.cctbx.nsff.tsc.multiplicity')",
    "onchange=spy.SetParam('snum.refinement.cctbx.nsff.tsc.multiplicity', html.GetValue('~name~'))",
    )
  $-
</td>

<td width='5%' align='left'>
  $+
    html.Snippet("gui/snippets/input-checkbox-td",
    "name=H_Aniso",
    "label=H Aniso",
    "checked=spy.GetParam('snum.refinement.cctbx.nsff.tsc.h_aniso')",
    "oncheck=spy.SetParam('snum.refinement.cctbx.nsff.tsc.h_aniso','True')",
    "bgcolor=GetVar(HtmlTableRowBgColour)",
    "onuncheck=spy.SetParam('snum.refinement.cctbx.nsff.tsc.h_aniso','False')"
    )
  $-
</td>

<td width='5%' align='left'>
  $+
    html.Snippet("gui/snippets/input-checkbox-td",
    "name=H_Afix 0",
    "label=No Afix",
    "checked=spy.GetParam('snum.refinement.cctbx.nsff.tsc.h_afix')",
    "oncheck=spy.SetParam('snum.refinement.cctbx.nsff.tsc.h_afix','True')",
    "bgcolor=GetVar(HtmlTableRowBgColour)",
    "onuncheck=spy.SetParam('snum.refinement.cctbx.nsff.tsc.h_afix','False')"
    )
  $-
</td>

<td width='5%' align="left">
  $+
    html.Snippet("gui/snippets/input-checkbox-td",
    "name=Keep_WFN",
    "label=Keep WFN",
    "checked=spy.GetParam('snum.refinement.cctbx.nsff.tsc.keep_wfn')",
    "oncheck=spy.SetParam('snum.refinement.cctbx.nsff.tsc.keep_wfn','True')",
    "bgcolor=GetVar(HtmlTableRowBgColour)",
    "onuncheck=spy.SetParam('snum.refinement.cctbx.nsff.tsc.keep_wfn','False')"
    )
  $-
</td>

<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->

<!-- #ignoreif not strcmp(spy.GetParam('snum.refinement.cctbx.nsff.tsc.source'),Tonto)
<tr ALIGN='left' NAME='SNUM_REFINEMENT_NSFF' width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-first-column.htm;help_ext=NoSpherA2 Extras;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->
<td width="20%" align="left">
  <b>Cluster radius  </b>
</td>
<td width="5%">
  $+
    html.Snippet("gui/snippets/input-text",
    "name=NoSpherA2_cluster_radius@refine",
    "value=spy.GetParam('snum.refinement.cctbx.nsff.tsc.cluster_radius')",
    "onchange=spy.SetParam('snum.refinement.cctbx.nsff.tsc.cluster_radius', html.GetValue('~name~'))")
  $-
  </td>
<td width="16%" align='right'>
    <b>DIIS Conv. </b>
</td>
<td width="25%">
  $+
    html.Snippet("gui/snippets/input-combo",
    "name=NoSpherA2_DIIS@refine",
    "items='0.1;0.01;0.001;0.0001;0.00001'",
    "value=spy.GetParam('snum.refinement.cctbx.nsff.tsc.DIIS')",
    "onchange=spy.SetParam('snum.refinement.cctbx.nsff.tsc.DIIS', html.GetValue('~name~'))")
   $-
  </td>
<td width="5%" align="left">
  $+
    html.Snippet("gui/snippets/input-checkbox-td",
    "name=NoSpherA2_cluster_grow@refine",
    "label=Complete Cluster",
    "bgcolor=GetVar(HtmlTableRowBgColour)",
    "checked=spy.GetParam('snum.refinement.cctbx.nsff.tsc.cluster_grow')",
    "oncheck=spy.SetParam('snum.refinement.cctbx.nsff.tsc.cluster_grow','True')",
    "onuncheck=spy.SetParam('snum.refinement.cctbx.nsff.tsc.cluster_grow','False')"
    )
  $-
</td>

<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->
#ignoreif -->

#ignoreif -->

<!-- #ignoreif not spy.NoSpherA2.check_for_matching_fcf()
<tr ALIGN='left' NAME='defden_buttons' width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-help-first-column.htm;help_ext=Non-Spherical Form Factors;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->

  $+
    html.Snippet(GetVar(default_link),
    "value=Show Residual Density",
    "onclick=spy.SetParam('snum.map.type','diff')>>spy.SetParam('snum.map.source','fcf')>>spy.gui.maps.MapView('off')>>spy.gui.maps.MapView('on')",
   )
  $-
  $+
    html.Snippet(GetVar(default_link),
    "value=Show Deformation Density",
    "onclick=spy.SetParam('snum.map.type','fcfmc')>>spy.SetParam('snum.map.source','fcf')>>spy.gui.maps.MapView('off')>>spy.gui.maps.MapView('on')",
    )
  $-

<td width="10%" align="right"> <b>%Res%/&Aring</b></td>
<td width="10%" align='right'>
  <font size="$GetVar('HtmlFontSizeControls')">
  $+
    html.Snippet("gui/snippets/input-text",
    "name=SET_SNUM_MAP_RESOLUTION_NoSpherA2",
    "value=spy.GetParam('snum.map.resolution')",
    "onchange=spy.SetParam('snum.map.resolution',html.GetValue(~name~))>>spy.gui.maps.MapView('off')",
    "onchangealways=True",
    )
  $-
</td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->
#ignoreif -->

<!-- #ignoreif spy.NoSpherA2.check_for_matching_fcf()
<tr ALIGN='left' NAME='defden_buttons' width='100%'>
<!-- #include tool-help-first-column gui\blocks\tool-help-first-column.htm;help_ext=Non-Spherical Form Factors;1; -->
<!-- #include row_table_on gui\blocks\row_table_on.htm;1; -->
<td width="20%" align="center"><b>No proper fcf found!</b> (include List 3 or 6 in .ins maybe?)</td>
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->
#ignoreif -->


<!-- #include tool-row-help gui\blocks\tool-row-help.htm;name='MAP_HEADER';help_ext=map-header;1 -->

$spy.gui.maps.SetXgridView()
<!-- #include xgrid gui\snippets\snippet-xgrid.htm;suffix=maps;1; -->
<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->

<!-- #ignoreif or(strcmp(xgrid.RenderMode(),'contour'),strcmp(xgrid.RenderMode(),'contour+plane'),strcmp(xgrid.RenderMode(),'plane'))
<tr bgcolor="$GetVar(HtmlTableBgColour)">
<!-- #include xgrid gui\snippets\snippet-3D-xgrid.htm;1; -->
#ignoreif -->

<!-- #ignoreif not(or(strcmp(xgrid.RenderMode(),'contour'),strcmp(xgrid.RenderMode(),'contour+plane'),strcmp(xgrid.RenderMode(),'plane')))
<tr bgcolor="$GetVar(HtmlTableBgColour)">
<!-- #include xgrid gui\snippets\snippet-2D-xgrid.htm;1; -->
#ignoreif -->

<!-- #include row_table_off gui\blocks\row_table_off.htm;1; -->

